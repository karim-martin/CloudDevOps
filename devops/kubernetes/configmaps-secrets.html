<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Kubernetes ConfigMaps and Secrets - managing configuration and sensitive data.">
  <title>ConfigMaps & Secrets | CloudDevOps</title>
  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="icon" type="image/svg+xml" href="../../assets/images/logo.svg">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header class="site-header"><div class="header-container"><a href="../../" class="logo"><img src="../../assets/images/logo.svg" alt=""><span>CloudDevOps</span></a><nav class="main-nav"><a href="../../devops/" class="nav-link active">DevOps</a><a href="../../cloud/" class="nav-link">Cloud</a>
        <a href="../../app-deploy/" class="nav-link">App Deploy</a><a href="../../app-deploy/" class="nav-link">App Deploy</a></nav><div class="header-actions"><button class="mobile-menu-toggle" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div></header>
  <div class="sidebar-overlay"></div>

  <div class="page-wrapper">
    <aside class="sidebar"><nav class="sidebar-nav"><div class="sidebar-section"><h3 class="sidebar-section-title">Kubernetes</h3><ul class="sidebar-links"><li><a href="./">Overview</a></li><li><a href="./architecture.html">Architecture</a></li><li><a href="./pods-deployments.html">Pods & Deployments</a></li><li><a href="./services-networking.html">Services & Networking</a></li><li><a href="./configmaps-secrets.html" class="active">ConfigMaps & Secrets</a></li><li><a href="./storage.html">Storage</a></li><li><a href="./helm.html">Helm Charts</a></li></ul></div></nav></aside>
    <main id="main-content" class="main-content">
      <article class="content-article">
        <nav class="breadcrumbs"><ol><li><a href="../../">Home</a></li><li><a href="../">DevOps</a></li><li><a href="./">Kubernetes</a></li><li aria-current="page">ConfigMaps & Secrets</li></ol></nav>
        <header class="article-header"><h1>ConfigMaps & Secrets</h1></header>

        <div class="article-body">
          <h2 id="configmaps">ConfigMaps</h2>
          <p>ConfigMaps store non-sensitive configuration data as key-value pairs.</p>

          <pre><code class="language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  DATABASE_HOST: "db.example.com"
  LOG_LEVEL: "info"
  config.json: |
    {
      "feature": true,
      "timeout": 30
    }</code></pre>

          <pre><code class="language-bash"># Create from literal
kubectl create configmap myconfig --from-literal=key=value

# Create from file
kubectl create configmap myconfig --from-file=config.properties

# View ConfigMap
kubectl get configmap myconfig -o yaml</code></pre>

          <h3>Using ConfigMaps in Pods</h3>
          <pre><code class="language-yaml">spec:
  containers:
  - name: app
    image: myapp
    # As environment variables
    envFrom:
    - configMapRef:
        name: app-config
    # Individual key
    env:
    - name: DB_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: DATABASE_HOST
    # As volume
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: app-config</code></pre>

          <h2 id="secrets">Secrets</h2>
          <p>Secrets store sensitive data like passwords, tokens, and keys (base64 encoded).</p>

          <pre><code class="language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
data:
  username: YWRtaW4=      # base64 encoded
  password: cGFzc3dvcmQ=
---
# Using stringData (auto-encoded)
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
stringData:
  username: admin
  password: password</code></pre>

          <pre><code class="language-bash"># Create from literal
kubectl create secret generic mysecret --from-literal=password=mypass

# Create from file
kubectl create secret generic mysecret --from-file=ssh-key=~/.ssh/id_rsa

# Create TLS secret
kubectl create secret tls tls-secret --cert=cert.pem --key=key.pem

# View (base64 encoded)
kubectl get secret mysecret -o yaml

# Decode value
kubectl get secret mysecret -o jsonpath='{.data.password}' | base64 -d</code></pre>

          <h3>Using Secrets in Pods</h3>
          <pre><code class="language-yaml">spec:
  containers:
  - name: app
    image: myapp
    # As environment variable
    env:
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-secret
          key: password
    # As volume
    volumeMounts:
    - name: secret-volume
      mountPath: /etc/secrets
      readOnly: true
  volumes:
  - name: secret-volume
    secret:
      secretName: db-secret</code></pre>

          <h2 id="secret-types">Secret Types</h2>
          <div class="table-wrapper">
            <table class="cheatsheet-table">
              <thead><tr><th>Type</th><th>Usage</th></tr></thead>
              <tbody>
                <tr><td><code>Opaque</code></td><td>Generic user data (default)</td></tr>
                <tr><td><code>kubernetes.io/tls</code></td><td>TLS certificates</td></tr>
                <tr><td><code>kubernetes.io/dockerconfigjson</code></td><td>Docker registry auth</td></tr>
                <tr><td><code>kubernetes.io/basic-auth</code></td><td>Basic authentication</td></tr>
                <tr><td><code>kubernetes.io/ssh-auth</code></td><td>SSH credentials</td></tr>
              </tbody>
            </table>
          </div>

          <div class="callout callout-warning">
            <div class="callout-title">Security Note</div>
            <p>Secrets are base64 encoded, not encrypted. Use external secret management (Vault, Sealed Secrets) for production.</p>
          </div>

          <h2 id="serviceaccount">Service Account</h2>
          <p>ServiceAccounts provide identity for processes running in Pods to interact with the Kubernetes API.</p>

          <pre><code class="language-yaml"># serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-service-account
  namespace: default
automountServiceAccountToken: true  # Mount token in pods</code></pre>

          <h3>Using ServiceAccount in Pod</h3>
          <pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  serviceAccountName: my-service-account
  containers:
  - name: app
    image: myapp</code></pre>

          <h3>ServiceAccount with RBAC</h3>
          <p>Grant permissions to a ServiceAccount using Role and RoleBinding:</p>
          <pre><code class="language-yaml"># role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: pod-reader
  namespace: default
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]
---
# rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: default
subjects:
- kind: ServiceAccount
  name: my-service-account
  namespace: default
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io</code></pre>

          <h3>ServiceAccount Commands</h3>
          <div class="table-wrapper">
            <table class="cheatsheet-table">
              <thead><tr><th>Command</th><th>Description</th></tr></thead>
              <tbody>
                <tr><td><code>kubectl get sa</code></td><td>List ServiceAccounts</td></tr>
                <tr><td><code>kubectl create sa mysa</code></td><td>Create ServiceAccount</td></tr>
                <tr><td><code>kubectl describe sa mysa</code></td><td>ServiceAccount details</td></tr>
                <tr><td><code>kubectl get rolebinding</code></td><td>List RoleBindings</td></tr>
                <tr><td><code>kubectl auth can-i get pods --as=system:serviceaccount:default:mysa</code></td><td>Check permissions</td></tr>
              </tbody>
            </table>
          </div>

          <div class="callout callout-info">
            <p><strong>Default ServiceAccount:</strong> Each namespace has a default ServiceAccount. Pods use it if no serviceAccountName is specified.</p>
          </div>
        </div>

        <nav class="page-navigation">
          <a href="./services-networking.html" class="nav-prev"><span class="nav-label">Previous</span><span class="nav-title">Services & Networking</span></a>
          <a href="./storage.html" class="nav-next"><span class="nav-label">Next</span><span class="nav-title">Storage</span></a>
        </nav>
      </article>
    </main>
  </div>
  <footer class="site-footer"><div class="footer-container"><p class="copyright">CloudDevOps - Learning Journey</p></div></footer>
  <script src="../../assets/js/navigation.js"></script><script src="../../assets/js/main.js"></script>
</body>
</html>
